; this file contains model definition

; prefix
;   acr::
; define
;   u: user
;   c: course
;   p: payment
;   t0: createdAt
;   t1: updatedAt
;   s: session

; id counter
id:c :: string ; int
id:p :: string ; int

; user data
u :: hash
- {id} :: string ; binary
  username
  name
  aboutMe
  image
  createdAt
  updatedAt

u:username :: hash
- {username} ; map to user id

u:t0 :: zset
u:t1 :: zset

u:{id}:e :: zset ; user's enrolled course
u:{id}:c :: set ; user's course
u:{id}:p :: zset ; user's payment

u:all :: set
u:admin :: set
u:instructor :: set

; course data
c :: hash
- {id} :: string ; binary
  title
  shortDesc
  desc
  image
  userId ; owner
  start
  url
  type ; live, video, ebook
  video
  price
  discount
  contents
    title
    desc
    videoId
    videoType
    downloadURL
  enrollDetail
  createdAt
  updatedAt

c:all :: set
c:public :: set
c:enroll :: set
c:attend :: set
c:assignment :: set
c:discount :: set

c:url :: hash
- {url} ; map to course id

c:t0 :: zset
c:t1 :: zset

c:{id}:u :: zset ; enrolled users
c:{id}:p :: set ; course payment

; payment data
p :: hash
- {id}
  userId ; owner
  courseId
  image
  code
  price
  originalPrice
  createdAt
  updatedAt
  at

p:t0 :: zset
p:t1 :: zset
p:all :: set
p:pending :: set

s:{sessId} :: string ; session data binary
